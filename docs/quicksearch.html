<html>
<head>
</head>
<body style="background: transparent;">
    <script src="scripts/docstrap.lib.js"></script>
    <script src="scripts/lunr.min.js"></script>
    <script src="scripts/fulltext-search.js"></script>

    <script type="text/x-docstrap-searchdb">
    {"global.html":{"id":"global.html","title":"Global","body":" VDJManager Classes DatabaseInfosloadPlaylistPlaylistPoiScanSongTags Global backupgetDrivePathsgetDrivesgetIgnoredDrivesgetVDJFoldersisRunningloadAllDatabasesloadDatabaselookupPathsreadDirectoryreadDirectoryRecursiverestore Global Methods &lt;async&gt; backup(dstPath [, dbList] [, list]) Backup entire VirtualDJ root folder (folder, history, mappers, playlists, cloudlists, settings and databases). Parameters: Name Type Argument Default Description dstPath string where to save the backup zip file dbList Array &lt;optional&gt; array of additional paths to the database.xml files. The main database.xml is automatically included. list Array &lt;optional&gt; [ 'Folders', 'History', 'Mappers', 'Playlists', 'Sampler', 'Cloudlists', 'settings.xml' ] folder and file list to backup. Note that database.xml is handled separately. Returns: true if zip was created and saved successfully Type Promise.&lt;boolean&gt; getDrivePaths( [listAll] [, includeHome]) List system, removable and network drives where a VirtualDJ folder is located. Respects ignoreDrives settings (can be overridden). In contrast to getDrives() this call only lists the paths to each VirtualDJ folder. Parameters: Name Type Argument Default Description listAll Boolean &lt;optional&gt; false if true will ignore the ignoreDrives setting and list all drives where a VirtualDJ folder is found in the root. includeHome Boolean &lt;optional&gt; true since root can be obtained via vdjFolders() this is optional. Set to false to ignore this drive (e.g. for backup()/restore() extra list). Returns: [] - list of strings holding path to each VirtualDJ folder getDrives( [listAll] [, includeHome]) List system, removable and network drives where a VirtualDJ folder is located. Respects ignoreDrives settings (can be overridden). If you only need a list of paths, see getDrivesPaths() instead. Parameters: Name Type Argument Default Description listAll Boolean &lt;optional&gt; false if true will ignore the ignoreDrives setting and list all drives where a VirtualDJ folder is found in the root. includeHome Boolean &lt;optional&gt; true since root can be obtained via vdjFolders() this is optional. Set to false to ignore this drive (e.g. for backup()/restore() extra list). Returns: [] list of objects holding information about each VirtualDJ folder and drive getIgnoredDrives() Get non-ignored drive letters (Windows only for now). See settings ignoreDrives for details. Returns: Type Array getVDJFolders() Returns list of objects with paths VirtualDJ is using to store data. Returns: Type * &lt;async&gt; isRunning() Check if VirtualDJ software is running. It's critical as to write operations that it doesn't, so use this async call before invoking any update or write operations to databases, playlists etc. Returns: true if VirtualDJ is running Type Promise.&lt;Boolean&gt; loadAllDatabases( [all]) Loads all available databases from disk to a list of Database objects. Note that due to databases may reside on removable drives, the result may vary. Parameters: Name Type Argument Default Description all Boolean &lt;optional&gt; false ignores ignoreDrives settings (only effective on Windows) Returns: [] - List of Database objects. Should always contain at least the main database loadDatabase(path) Loads a XML database file and parses it into objects (Song list). Parameters: Name Type Description path string path to VirtualDJ (v8+) database.xml file Returns: if something went wrong, null is returned. Type null | Database lookupPaths(paths, dbs [, ignoreRoot]) Lookup list of paths in the database list. Produces a list of Song objects for found items. Parameters: Name Type Argument Default Description paths Array list of absolute paths to tracks dbs Array list of Database objects to query against. ignoreRoot Boolean &lt;optional&gt; false ignore root drive check Returns: [] - List of Song objects readDirectory(path) Read a single directory. Returns an object with files and folder arrays containing the resolved path for each entry. Parameters: Name Type Description path string path to base directory. Throws: If base path is not a directory the call will throw an exception. Returns: Type Object readDirectoryRecursive(path) Read a directory recursively. Returns an object with files and folder arrays containing the resolved path for each entry and for each sub-folder. Parameters: Name Type Description path string path to base directory. Throws: If base path is not a directory the call will throw an exception. Returns: Type Object restore(zipPath, dstPath) Restores a backup zip file either made by VirtualDJ software or with this package using vdj.backup(). CAUTION: all files in destination will be overwritten! Use the optional dstPath argument to test folder structure and content first. Parameters: Name Type Description zipPath string path to VirtualDJ or vdjdataapi zip file to restore. dstPath string path to restore to, Normally the home folder (getVDJFolders().homeFolder). Returns: Type Promise.&lt;Boolean&gt; × Search results Close Silverspex "},"classes.list.html":{"id":"classes.list.html","title":"Classes","body":" VDJManager Classes DatabaseInfosloadPlaylistPlaylistPoiScanSongTags Global backupgetDrivePathsgetDrivesgetIgnoredDrivesgetVDJFoldersisRunningloadAllDatabasesloadDatabaselookupPathsreadDirectoryreadDirectoryRecursiverestore Classes Classes Database Infos loadPlaylist Playlist Poi Scan Song Tags × Search results Close Silverspex "},"index.html":{"id":"index.html","title":"Index","body":" VDJManager Classes DatabaseInfosloadPlaylistPlaylistPoiScanSongTags Global backupgetDrivePathsgetDrivesgetIgnoredDrivesgetVDJFoldersisRunningloadAllDatabasesloadDatabaselookupPathsreadDirectoryreadDirectoryRecursiverestore vdj-data Scripting engine for VirtualDJ to handle databases, playlists, cue files as well as backup and restore, path validation, cleaning and more. This package is a building block component that can be used to make software that handles VirtualDJ information, or simply to write quick scripts for specific tasks that is not possible or easy to do within VirtualDJ itself. Prerequisites You will need Node.js for this package. It is assumed you already know how to use Node.js and NPM if you plan to integrate this package with your software. While the package should theoretically run on any platform where Node.js can run, it has only been tested and developed (so far) on Windows. It would also be a big advantage to have the VirtualDJ software installed. If you don't have already, you can use their free version from here. Install Run the following command in CLI to install this package into your project: npm i silverspex/vdj-data Development To run demos or to create PRs, clone this repo using git in the current directory: git clone https://github.com/silverspex/vdj-data.git Or SSH if you prefer. Then cd into vdj-data/. Examples Examples showing some of the functions the package offers. Always included in your projects: // Import and use in your projects const vdj = require('vdj-data'); // VDJ Data API can now be used .. Various ways to load and handle databases: const path = require('path'); // Get home folder of VirtualDJ const homeFolder = vdj.getVDJFolders().homeFolder; const mainDatabasePath = path.join(homeFolder, 'database.xml'); // Load and parse a single database const database = vdj.loadDatabase(mainDatabasePath); if (database) { // use here... } // Load all available databases from various drives (Windows only for now) const databases = vdj.loadAllDatabases(); // Merge all databases into a single instance for simplified use: const merged = vdj.Database.merge(databases); // Split them out using ignoreDrives (Windows) and available drives: const split = vdj.Database.split(merged); // Export a database back to disk as XML: database.export(mainDatabasePath); Various ways using a database: // iterate over all Song objects database.songs.forEach(song =&gt; { /* do something with a song here */ }); // search returning array of matching Song objects const results = database.search(\"talla world\", {artist: true, title: true}); // load a song initializing path and size const song = database.loadSong('path/to/song.mp3'); // load a song and parse tags if any (uses Promise) const songAndTags = await database.loadSongAndTags('path/to/song.flac'); // add to database database.add(song); database.add(songAndTags); // remove a song const oldSong = database.remove(song); // remove a song using an index const oldSong2 = database.remove(7); // verify song paths - unavailable songs returned as an Array of Song objects: const unavailables = database.verifyPaths(); // convert to XML - REMEMBER TO BACKUP YOUR DATA FIRST (see below) const xml = database.toXML(); Various ways using Song objects: // Get first song in database assuming there is one const song = database.songs[0]; // convert to strings const txt = song.toString(); // -&gt; \"artist - title (remix)\" const tx7 = song.toString('%title - %artist (%remix) [%year]'); // get artist, title and remix from filename: song.filenameToTag(); // top-level information const path = song.filePath; const size = song.fileSize; // using tags: const artist = song.tags.artist; const title = song.tags.title; // using infos const playCount = song.infos.playCount; // using scan const bpm = song.scan.bpm; // verify path const success = song.verifyPath(); // update comment song.comment = 'Edited via VDJ Data API!'; Using Playlists: // Load a Playlist const pl = vdj.loadPlaylist('path/to/playlist.m3u'); // number of Song objects with valid paths const plSongCount = pl.songs.length; // array with path strings of missing files const plMissing = pl.verifyPaths(); // compile to string that can be saved as new playlist const newPlaylist = pl.compile(); Backup: Using backup will backup databases from all available VirtualDJ drives, playlists, folders, mappings, history, settings, samples etc. You can also define a custom list as a 3. argument if you prefer. The backup zip files may be both one created by VirtualDJ itself, or the one created using this package's backup() method as shown below. // get list of all database paths except main as backup() includes that const databasePaths = isWin ? vdj.getDrivePaths(true, false).map(p =&gt; path.join(p, 'database.xml')) : undefined; // getDrivePaths() not currently supported on Mac // backup() uses Promise vdj .backup(`vdj-backup-${ Date.now() }.zip`, databasePaths) .then(success =&gt; { /* next step from here */ }) .catch(error =&gt; { /* an error occurred */ }) // or use async/await (async () =&gt; { try { const success = await vdj.backup(`vdj-backup-${ Date.now() }.zip`, databasePaths); } catch(err) { /* an error occurred */ } })(); Restore: Using restore will restore anything found in a zip backup file, whether it was created by VirtualDJ or via backup(). // Caution: Will overwrite anything in its way... (async () =&gt; { const homeFolder = vdj.getDrivePaths().homeFolder; const status = await vdj.restore('path/to/backup.zip', homeFolder); //... })(); System functions: // check if VirtualDJ is running to block reading/writing database.xml files (async () =&gt; { const running = await vdj.isRunning(); if (!running) { /* do yar thang... */ } })(); // list all drives with VirtualDJ databases and get basic drive info const drives = vdj.getDrives(); // always a main home drive if VirtualDJ is installed console.log(drives); /* =&gt; [ { root: 'D:\\\\', folder: 'D:\\\\docs\\\\VirtualDJ', size: 1000203087872, free: 569048289280, type: 'Local Fixed Disk', main: true }, ... */ // globally available after importing 'vdj-data' if (isWin) { /* Windows version */ } if (isMac) { /* OSX version */ } // or use global.isWin / global.isMac Demos The folder demos/ contains some demo scripts. To run, open CLI, \"cd\" to root folder and type: node demos\\name-of-demo &lt;args-if-any&gt; See content of each file for details. Documentation The package comes (eventually) with full API documentation which you find in the docs/ folder. Performance Currently load and parse about 25,000 - 30,000 song entries in less than a second, depending on system configuration and database details (this result with a slow spinning disk, 23 mb database, i7). The code base is not fully optimized so expect even better performance over time. Issues NOTE: The development is currently in ALPHA. The API may change without prior notice. Many features are not yet implemented. Known issues: Possible issue with double encoded entities (e.g. \"&amp;amp;amp;\"). Documentation is currently incomplete. Needs refactoring Currently system calls (detection of folder paths etc.) only works with Windows. Feel free to use the issue tracker to report issues, feature requests. License There is currently no license available. You may download and evaluate the package and use it in your personal non-commercial projects. Future licenses will be made available for personal as well as commercial use. (c) Silverspex 2019 × Search results Close Silverspex "},"Database.html":{"id":"Database.html","title":"Class: Database","body":" VDJManager Classes DatabaseInfosloadPlaylistPlaylistPoiScanSongTags Global backupgetDrivePathsgetDrivesgetIgnoredDrivesgetVDJFoldersisRunningloadAllDatabasesloadDatabaselookupPathsreadDirectoryreadDirectoryRecursiverestore Class: Database Database new Database( [json] [, path]) Host object for database objects (Songs, POIs). If no database object is given, a new empty database is created. Parameters: Name Type Argument Default Description json * &lt;optional&gt; Optional JSON object loaded via vdj.loadDatabase(). path string | null &lt;optional&gt; null path to this database Methods &lt;static&gt; merge(list [, clone]) Will merge a list of databases (from various drives) into a single database to allow simpler handling. IMPORTANT: use the split() function to separate the database entries back to single database files before saving! Parameters: Name Type Argument Default Description list Array list of Database objects clone Boolean &lt;optional&gt; false clone instead of reference each Song object. &lt;static&gt; split(db, useIgnoreDrives) Split a merged database into individual Database objects. Use this only on a Database object that is the result of merge(). Parameters: Name Type Description db Database Merged Database object to split. useIgnoreDrives Returns: List of Database objects representing each drive. Type Array add(song [, validate]) Add a Song object to the database. Validates uniqueness by default (path). Parameters: Name Type Argument Default Description song Song add Song object to database validate Boolean &lt;optional&gt; true validate uniqueness of file path. Returns: Type boolean export(path) Export this instance as a database XML file that can be used by VirtualDJ. Parameters: Name Type Description path string where the database file will be saved. Returns: Type boolean findSongByPath(path) Locate Song object based on its filepath. Parameters: Name Type Description path string path used for Song object Returns: Song if found, otherwise null Type null | * loadSong(path) Loads a music or video file and returns a Song object from it. This call will only initialize path and file size. Parameters: Name Type Description path See: loadSongAndTags() Returns: Type Song | null &lt;async&gt; loadSongAndTags(path) Loads a music or video file and attempt to extract tags information from it including bitrate and duration. Parameters: Name Type Description path string path to file See: loadSong() Returns: resolves with the initialized Song object Type Promise.&lt;Song&gt; remove(song) Remove a Song from the database using either an index or a Song object. Parameters: Name Type Description song Song | number index or Song object to remove Returns: the removed Song object, or null if out of range or not found Type Song | null search(keywords [, options]) Search the database for keywords. Multiple keywords may be provided separated by a space. By default options has artist, title and remix from tags enabled. Parameters: Name Type Argument Description keywords string keyword or keywords separated with space options * &lt;optional&gt; options enable or disable fields to search in. Returns: [] toXML() Converts Database object to a XML string that cane be saved as a database.xml file. Returns: Type string verifyPaths() Verifies Songs' file path. A list of Song objects is returned when a Song's path could not be verified. Note that the database may old references to path on removable drives etc. which may not be currently available. Returns: [] - list of Songs who's path could not be verified. × Search results Close Silverspex "},"Infos.html":{"id":"Infos.html","title":"Class: Infos","body":" VDJManager Classes DatabaseInfosloadPlaylistPlaylistPoiScanSongTags Global backupgetDrivePathsgetDrivesgetIgnoredDrivesgetVDJFoldersisRunningloadAllDatabasesloadDatabaselookupPathsreadDirectoryreadDirectoryRecursiverestore Class: Infos Infos new Infos( [json]) Instance of the Infos tag with normalized property names (JavaScript camel-case) and type casting. Parameters: Name Type Argument Description json * &lt;optional&gt; optional Infos JSON from XML branch. If none an empty instance is created. Methods toJSON() Convert instance to JSON representation with database property names. Returns: Type * toXML() Convert instance to XML representation. Returns: Type string × Search results Close Silverspex "},"loadPlaylist.html":{"id":"loadPlaylist.html","title":"Class: loadPlaylist","body":" VDJManager Classes DatabaseInfosloadPlaylistPlaylistPoiScanSongTags Global backupgetDrivePathsgetDrivesgetIgnoredDrivesgetVDJFoldersisRunningloadAllDatabasesloadDatabaselookupPathsreadDirectoryreadDirectoryRecursiverestore Class: loadPlaylist loadPlaylist new loadPlaylist(path [, databaseList]) Parses a playlist into either Song objects (id database list is provided) and paths list (property paths). When a list of Database objects is provided, the playlist can be parsed into a Song list (property `songs'). Parameters: Name Type Argument Description path string path to playlist, history list databaseList Array &lt;optional&gt; optional array containing database objects. × Search results Close Silverspex "},"Playlist.html":{"id":"Playlist.html","title":"Class: Playlist","body":" VDJManager Classes DatabaseInfosloadPlaylistPlaylistPoiScanSongTags Global backupgetDrivePathsgetDrivesgetIgnoredDrivesgetVDJFoldersisRunningloadAllDatabasesloadDatabaselookupPathsreadDirectoryreadDirectoryRecursiverestore Class: Playlist Playlist new Playlist(path [, databaseList]) Parses a playlist into either Song objects (id database list is provided) and paths list (property paths). When a list of Database objects is provided, the playlist can be parsed into a Song list (property `songs'). Parameters: Name Type Argument Description path string path to playlist, history list databaseList Array &lt;optional&gt; optional array containing database objects. Methods compile( [usePaths]) Creates a playlist string that can be saved out as new playlist. NOTE: Tracks are based on Song list so if a track was not found in the database during parsing, it won't be included in the new playlist. Use the usePath option to use paths instead. Parameters: Name Type Argument Default Description usePaths Boolean &lt;optional&gt; false use paths to generate playlist instead of Song list. verifyPaths() Creates a list of entries that don't exist anymore. Returns: [] × Search results Close Silverspex "},"Poi.html":{"id":"Poi.html","title":"Class: Poi","body":" VDJManager Classes DatabaseInfosloadPlaylistPlaylistPoiScanSongTags Global backupgetDrivePathsgetDrivesgetIgnoredDrivesgetVDJFoldersisRunningloadAllDatabasesloadDatabaselookupPathsreadDirectoryreadDirectoryRecursiverestore Class: Poi Poi new Poi( [json]) POI object describing a single POI marker. Parameters: Name Type Argument Description json * &lt;optional&gt; JSON branch for this entry. If none is given an uninitialized instance is created. Methods toJSON() Convert instance to JSON representation with database property names. Returns: Type * toXML() Convert instance to XML representation. Returns: Type string × Search results Close Silverspex "},"Scan.html":{"id":"Scan.html","title":"Class: Scan","body":" VDJManager Classes DatabaseInfosloadPlaylistPlaylistPoiScanSongTags Global backupgetDrivePathsgetDrivesgetIgnoredDrivesgetVDJFoldersisRunningloadAllDatabasesloadDatabaselookupPathsreadDirectoryreadDirectoryRecursiverestore Class: Scan Scan new Scan( [json]) Instance of the Scan tag with normalized property names (JavaScript camel-case) and type casting. Parameters: Name Type Argument Description json * &lt;optional&gt; optional Infos JSON from XML branch. If none an empty instance is created. Methods toJSON() Convert instance to JSON representation with database property names. Returns: Type * toXML() Convert instance to XML representation. Returns: Type string × Search results Close Silverspex "},"Song.html":{"id":"Song.html","title":"Class: Song","body":" VDJManager Classes DatabaseInfosloadPlaylistPlaylistPoiScanSongTags Global backupgetDrivePathsgetDrivesgetIgnoredDrivesgetVDJFoldersisRunningloadAllDatabasesloadDatabaselookupPathsreadDirectoryreadDirectoryRecursiverestore Class: Song Song new Song( [json]) Instance of a Song with normalized property names (JavaScript camel-case) and type casting. Parameters: Name Type Argument Description json * &lt;optional&gt; optional Infos JSON from XML branch. If none an empty instance is created. Methods rename(newName) Renames the file name/path and also updates this Song instance. Parameters: Name Type Description newName toJSON() Convert instance to JSON representation with database property names. Returns: Type * toString( [format]) Produces a string based on given formatting. The default formatting is: %artist - %title (%remix) The information is extracted from the tags stored in the database. If a tag is empty an empty string is returned. Note that the keywords are case-sensitive. Keywords that can be used: %artist %title %remix %year %album %label %genre %trackNumber %composer %bpm %key %grouping %stars %user1 %user2 Parameters: Name Type Argument Default Description format string &lt;optional&gt; \"%artist - %title (%remix)\" formatting string Returns: Type string toXML() Convert instance to XML representation. Returns: Type string verifyPath() Verifies the file path. Returns: Type boolean × Search results Close Silverspex "},"Tags.html":{"id":"Tags.html","title":"Class: Tags","body":" VDJManager Classes DatabaseInfosloadPlaylistPlaylistPoiScanSongTags Global backupgetDrivePathsgetDrivesgetIgnoredDrivesgetVDJFoldersisRunningloadAllDatabasesloadDatabaselookupPathsreadDirectoryreadDirectoryRecursiverestore Class: Tags Tags new Tags( [json]) Instance of the Tags tag with normalized property names (JavaScript camel-case) and type casting. Parameters: Name Type Argument Description json * &lt;optional&gt; optional Infos JSON from XML branch. If none an empty instance is created. Methods toJSON() Convert instance to JSON representation with database property names. Returns: Type * toXML() Convert instance to XML representation. Returns: Type string × Search results Close Silverspex "}}
    </script>

    <script type="text/javascript">
        $(document).ready(function() {
            Searcher.init();
        });

        $(window).on("message", function(msg) {
            var msgData = msg.originalEvent.data;

            if (msgData.msgid != "docstrap.quicksearch.start") {
                return;
            }

            var results = Searcher.search(msgData.searchTerms);

            window.parent.postMessage({"results": results, "msgid": "docstrap.quicksearch.done"}, "*");
        });
    </script>
</body>
</html>
